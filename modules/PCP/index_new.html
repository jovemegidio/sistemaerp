<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <!-- ConfiguraÃ§Ã£o Global - DEVE ser carregado PRIMEIRO -->
    <script src="../../public/js/config.js"></script>
    
    <link rel="icon" type="image/x-icon" href="../../public/favicon-aluforce.webp">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>ALUFORCE - Planejamento e Controle da Produção</title>
    
    
    <link rel="stylesheet" href="../_shared/modern-saas.cssv=3.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        /* ============================================
           VARIÃVEIS CSS - DESIGN SYSTEM ALUFORCE
           ============================================ */
        :root {
            /* Cores Primárias - Vermelho */
            --primary-50: #fef2f2;
            --primary-100: #fee2e2;
            --primary-200: #fecaca;
            --primary-300: #fca5a5;
            --primary-400: #f87171;
            --primary-500: #ef4444;
            --primary-600: #dc2626;
            --primary-700: #b91c1c;
            --primary-800: #991b1b;
            --primary-900: #7f1d1d;
            
            /* Cores de Estação */
            --success-500: #10b981;
            --success-600: #059669;
            --warning-500: #f59e0b;
            --warning-600: #d97706;
            --danger-500: #ef4444;
            --danger-600: #dc2626;
            --info-500: #06b6d4;
            --info-600: #0891b2;
            
            /* Neutros */
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #374151;
            --gray-800: #1f2937;
            --gray-900: #111827;
            
            /* Dark Theme */
            --dark-bg: #0f172a;
            --dark-surface: #1e293b;
            --dark-border: #334155;
            
            /* Spacing */
            --space-1: 0.25rem;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-5: 1.25rem;
            --space-6: 1.5rem;
            --space-8: 2rem;
            --space-10: 2.5rem;
            --space-12: 3rem;
            
            /* Border Radius */
            --radius-sm: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --radius-2xl: 1.5rem;
            
            /* Shaçãows */
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            
            /* Transitions */
            --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-base: 200ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 300ms cubic-bezier(0.4, 0, 0.2, 1);
            
            /* Layout */
            --sidebar-width: 56px;
            --header-height: 56px;
        }

        /* ============================================
           RESET E BASE
           ============================================ */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--gray-50);
            color: var(--gray-900);
            line-height: 1.5;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* ============================================
           SIDEBAR - ESTILO INSTITUCIONAL
           ============================================ */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: var(--sidebar-width);
            height: 100vh;
            background: linear-gradient(180deg, var(--dark-bg) 0%, #0c1222 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: var(--space-4) 0;
            z-index: 1000;
            border-right: 1px solid var(--dark-border);
        }

        .sidebar-logo {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: var(--space-6);
            cursor: pointer;
            transition: all var(--transition-base);
            text-decoration: none;
        }

        .sidebar-logo:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(220, 38, 38, 0.4);
        }

        .sidebar-logo i {
            color: white;
            font-size: 18px;
        }

        .sidebar-nav {
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
            flex: 1;
            width: 100%;
            padding: 0 var(--space-3);
        }

        .sidebar-btn {
            width: 40px;
            height: 40px;
            border: none;
            background: transparent;
            color: var(--gray-400);
            border-radius: var(--radius-lg);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: all var(--transition-base);
            position: relative;
            margin: 0 auto;
            text-decoration: none;
        }

        .sidebar-btn:hover {
            background: rgba(255, 255, 255, 0.08);
            color: white;
        }

        .sidebar-btn.active {
            background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
            color: white;
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
        }

        .sidebar-btn::after {
            content: attr(data-tooltip);
            position: absolute;
            left: 54px;
            background: var(--gray-900);
            color: white;
            padding: 6px 12px;
            border-radius: var(--radius-md);
            font-size: 12px;
            font-weight: 500;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: all var(--transition-base);
            z-index: 1001;
        }

        .sidebar-btn:hover::after {
            opacity: 1;
        }

        .sidebar-divider {
            width: 32px;
            height: 1px;
            background: var(--dark-border);
            margin: var(--space-4) auto;
        }

        .sidebar-bottom {
            margin-top: auto;
            display: flex;
            flex-direction: column;
            gap: var(--space-2);
            padding: 0 var(--space-3);
        }

        /* ============================================
           HEADER - ESTILO INSTITUCIONAL
           ============================================ */
        .header {
            position: fixed;
            top: 0;
            left: var(--sidebar-width);
            right: 0;
            height: var(--header-height);
            background: var(--dark-bg);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 var(--space-6);
            z-index: 999;
            border-bottom: 1px solid var(--dark-border);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: var(--space-6);
        }

        .header-brand {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        .header-brand img {
            height: 28px;
            object-fit: contain;
        }

        .header-brand-divider {
            color: var(--gray-600);
            font-weight: 300;
        }

        .header-brand-module {
            color: var(--gray-400);
            font-size: 14px;
            font-weight: 500;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .header-btn {
            width: 36px;
            height: 36px;
            border: none;
            background: transparent;
            color: var(--gray-400);
            border-radius: var(--radius-md);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: all var(--transition-base);
            position: relative;
        }

        .header-btn:hover {
            background: rgba(255, 255, 255, 0.08);
            color: white;
        }

        .header-btn .notification-badge {
            position: absolute;
            top: 4px;
            right: 4px;
            min-width: 16px;
            height: 16px;
            background: var(--danger-500);
            color: white;
            font-size: 10px;
            font-weight: 600;
            border-radius: 999px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 4px;
        }

        .header-user {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            margin-left: var(--space-4);
            padding-left: var(--space-4);
            border-left: 1px solid var(--dark-border);
        }

        .header-user-info {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
        }

        .header-user-greeting {
            font-size: 11px;
            color: var(--gray-500);
        }

        .header-user-name {
            font-size: 13px;
            font-weight: 600;
            color: white;
        }

        .header-avatar {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            overflow: hidden;
            transition: all var(--transition-base);
        }

        .header-avatar:hover {
            transform: scale(1.05);
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.3);
        }

        .header-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* ============================================
           MAIN CONTENT AREA
           ============================================ */
        .main-content {
            margin-left: var(--sidebar-width);
            margin-top: var(--header-height);
            min-height: calc(100vh - var(--header-height));
            background: var(--gray-50);
        }

        .page-content {
            padding: var(--space-8);
            max-width: 1600px;
            margin: 0 auto;
        }

        /* ============================================
           PAGE HEADER
           ============================================ */
        .page-header {
            margin-bottom: var(--space-8);
        }

        .page-header-top {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            margin-bottom: var(--space-6);
        }

        .page-title-wrapper {
            display: flex;
            align-items: center;
            gap: var(--space-4);
        }

        .page-icon {
            width: 56px;
            height: 56px;
            border-radius: var(--radius-xl);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
        }

        .page-icon.blue { background: linear-gradient(135deg, var(--primary-500), var(--primary-600)); }
        .page-icon.green { background: linear-gradient(135deg, var(--success-500), var(--success-600)); }
        .page-icon.orange { background: linear-gradient(135deg, var(--warning-500), var(--warning-600)); }
        .page-icon.red { background: linear-gradient(135deg, var(--danger-500), var(--danger-600)); }
        .page-icon.cyan { background: linear-gradient(135deg, var(--info-500), var(--info-600)); }
        .page-icon.purple { background: linear-gradient(135deg, #8b5cf6, #7c3aed); }

        .page-title {
            font-size: 28px;
            font-weight: 700;
            color: var(--gray-900);
            margin: 0 0 var(--space-1) 0;
        }

        .page-subtitle {
            font-size: 14px;
            color: var(--gray-500);
            margin: 0;
        }

        .page-actions {
            display: flex;
            gap: var(--space-3);
        }

        /* ============================================
           BUTTONS
           ============================================ */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-3) var(--space-5);
            font-size: 14px;
            font-weight: 600;
            border-radius: var(--radius-lg);
            border: none;
            cursor: pointer;
            transition: all var(--transition-base);
            text-decoration: none;
            white-space: nowrap;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-500), var(--primary-600));
            color: white;
            box-shadow: 0 4px 14px rgba(220, 38, 38, 0.25);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(220, 38, 38, 0.35);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success-500), var(--success-600));
            color: white;
            box-shadow: 0 4px 14px rgba(16, 185, 129, 0.25);
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.35);
        }

        .btn-secondary {
            background: white;
            color: var(--gray-700);
            border: 1px solid var(--gray-300);
        }

        .btn-secondary:hover {
            background: var(--gray-50);
            border-color: var(--gray-400);
        }

        .btn-outline {
            background: transparent;
            color: var(--primary-600);
            border: 2px solid var(--primary-500);
        }

        .btn-outline:hover {
            background: var(--primary-50);
        }

        .btn-sm {
            padding: var(--space-2) var(--space-3);
            font-size: 13px;
        }

        .btn-lg {
            padding: var(--space-4) var(--space-6);
            font-size: 15px;
        }

        /* ============================================
           CARDS
           ============================================ */
        .card {
            background: white;
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray-200);
            transition: all var(--transition-base);
            overflow: hidden;
        }

        .card:hover {
            box-shadow: var(--shadow-md);
        }

        .card-header {
            padding: var(--space-5) var(--space-6);
            border-bottom: 1px solid var(--gray-100);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .card-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--gray-900);
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        .card-title i {
            color: var(--primary-500);
        }

        .card-body {
            padding: var(--space-6);
        }

        .card-footer {
            padding: var(--space-4) var(--space-6);
            border-top: 1px solid var(--gray-100);
            background: var(--gray-50);
        }

        /* ============================================
           STATS CARDS
           ============================================ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: var(--space-6);
            margin-bottom: var(--space-8);
        }

        @media (max-width: 1200px) {
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 640px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }

        .stat-card {
            background: white;
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray-200);
            display: flex;
            align-items: center;
            gap: var(--space-5);
            transition: all var(--transition-base);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
        }

        .stat-card.blue::before { background: linear-gradient(180deg, var(--primary-400), var(--primary-600)); }
        .stat-card.green::before { background: linear-gradient(180deg, var(--success-400), var(--success-600)); }
        .stat-card.orange::before { background: linear-gradient(180deg, var(--warning-400), var(--warning-600)); }
        .stat-card.red::before { background: linear-gradient(180deg, var(--danger-400), var(--danger-600)); }
        .stat-card.cyan::before { background: linear-gradient(180deg, var(--info-400), var(--info-600)); }
        .stat-card.purple::before { background: linear-gradient(180deg, #a78bfa, #7c3aed); }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }

        .stat-icon {
            width: 56px;
            height: 56px;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            flex-shrink: 0;
        }

        .stat-icon.blue { background: linear-gradient(135deg, var(--primary-500), var(--primary-600)); }
        .stat-icon.green { background: linear-gradient(135deg, var(--success-500), var(--success-600)); }
        .stat-icon.orange { background: linear-gradient(135deg, var(--warning-500), var(--warning-600)); }
        .stat-icon.red { background: linear-gradient(135deg, var(--danger-500), var(--danger-600)); }
        .stat-icon.cyan { background: linear-gradient(135deg, var(--info-500), var(--info-600)); }
        .stat-icon.purple { background: linear-gradient(135deg, #8b5cf6, #7c3aed); }

        .stat-content {
            flex: 1;
        }

        .stat-label {
            font-size: 13px;
            font-weight: 500;
            color: var(--gray-500);
            margin-bottom: var(--space-1);
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--gray-900);
            line-height: 1.2;
        }

        .stat-trend {
            display: flex;
            align-items: center;
            gap: var(--space-1);
            font-size: 12px;
            font-weight: 600;
            margin-top: var(--space-2);
        }

        .stat-trend.up { color: var(--success-600); }
        .stat-trend.down { color: var(--danger-600); }
        .stat-trend.neutral { color: var(--gray-500); }

        /* ============================================
           CONTENT GRID
           ============================================ */
        .content-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-6);
        }

        @media (max-width: 1024px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
        }

        .content-grid-3 {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-6);
        }

        @media (max-width: 1200px) {
            .content-grid-3 {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (max-width: 768px) {
            .content-grid-3 {
                grid-template-columns: 1fr;
            }
        }

        /* ============================================
           QUICK ACTIONS
           ============================================ */
        .quick-actions-list {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }

        .quick-action-btn {
            display: flex;
            align-items: center;
            gap: var(--space-4);
            padding: var(--space-4);
            background: var(--gray-50);
            border: 1px solid var(--gray-200);
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: all var(--transition-base);
            text-align: left;
            width: 100%;
        }

        .quick-action-btn:hover {
            background: white;
            border-color: var(--primary-300);
            box-shadow: var(--shadow-md);
            transform: translateX(4px);
        }

        .quick-action-icon {
            width: 44px;
            height: 44px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: white;
            flex-shrink: 0;
        }

        .quick-action-content {
            flex: 1;
        }

        .quick-action-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: 2px;
        }

        .quick-action-desc {
            font-size: 12px;
            color: var(--gray-500);
        }

        .quick-action-btn i.fa-chevron-right {
            color: var(--gray-400);
            font-size: 12px;
            transition: transform var(--transition-base);
        }

        .quick-action-btn:hover i.fa-chevron-right {
            transform: translateX(4px);
            color: var(--primary-500);
        }

        /* ============================================
           TABLES
           ============================================ */
        .table-container {
            overflow-x: auto;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
        }

        .data-table thead th {
            background: var(--gray-50);
            padding: var(--space-3) var(--space-4);
            text-align: left;
            font-size: 12px;
            font-weight: 600;
            color: var(--gray-600);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            border-bottom: 2px solid var(--gray-200);
        }

        .data-table tbody td {
            padding: var(--space-4);
            border-bottom: 1px solid var(--gray-100);
            font-size: 14px;
            color: var(--gray-700);
        }

        .data-table tbody tr:hover {
            background: var(--gray-50);
        }

        .data-table tbody tr:last-child td {
            border-bottom: none;
        }

        /* ============================================
           BADGES
           ============================================ */
        .badge {
            display: inline-flex;
            align-items: center;
            padding: var(--space-1) var(--space-3);
            font-size: 11px;
            font-weight: 600;
            border-radius: 999px;
            text-transform: uppercase;
            letter-spacing: 0.025em;
        }

        .badge-primary { background: var(--primary-100); color: var(--primary-700); }
        .badge-success { background: #dcfce7; color: #166534; }
        .badge-warning { background: #fef3c7; color: #92400e; }
        .badge-danger { background: #fee2e2; color: #991b1b; }
        .badge-info { background: #cffafe; color: #155e75; }
        .badge-gray { background: var(--gray-100); color: var(--gray-700); }

        /* ============================================
           ALERTS
           ============================================ */
        .alert-item {
            display: flex;
            align-items: center;
            gap: var(--space-4);
            padding: var(--space-4);
            background: white;
            border-radius: var(--radius-lg);
            border-left: 4px solid;
            margin-bottom: var(--space-3);
            transition: all var(--transition-base);
        }

        .alert-item:hover {
            box-shadow: var(--shadow-md);
        }

        .alert-item.warning {
            border-color: var(--warning-500);
            background: linear-gradient(90deg, #fffbeb, white);
        }

        .alert-item.danger {
            border-color: var(--danger-500);
            background: linear-gradient(90deg, #fef2f2, white);
        }

        .alert-item.info {
            border-color: var(--info-500);
            background: linear-gradient(90deg, #ecfeff, white);
        }

        .alert-item.success {
            border-color: var(--success-500);
            background: linear-gradient(90deg, #f0fdf4, white);
        }

        .alert-icon {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            flex-shrink: 0;
        }

        .alert-item.warning .alert-icon { background: var(--warning-100); color: var(--warning-600); }
        .alert-item.danger .alert-icon { background: var(--danger-100); color: var(--danger-600); }
        .alert-item.info .alert-icon { background: var(--info-100); color: var(--info-600); }
        .alert-item.success .alert-icon { background: var(--success-100); color: var(--success-600); }

        .alert-content {
            flex: 1;
        }

        .alert-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: 2px;
        }

        .alert-desc {
            font-size: 12px;
            color: var(--gray-500);
        }

        /* ============================================
           EMPTY STATE
           ============================================ */
        .empty-state {
            text-align: center;
            padding: var(--space-12) var(--space-6);
        }

        .empty-state-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--gray-100);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            color: var(--gray-400);
            margin: 0 auto var(--space-6);
        }

        .empty-state-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: var(--space-2);
        }

        .empty-state-desc {
            font-size: 14px;
            color: var(--gray-500);
            max-width: 320px;
            margin: 0 auto;
        }

        /* ============================================
           VIEWS - PÃGINA ESCONDIDA
           ============================================ */
        .view {
            display: none;
        }

        .view.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ============================================
           SEARCH BAR
           ============================================ */
        .search-bar {
            display: flex;
            gap: var(--space-4);
            margin-bottom: var(--space-6);
        }

        .search-input-wrapper {
            position: relative;
            flex: 1;
        }

        .search-input-wrapper i {
            position: absolute;
            left: var(--space-4);
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray-400);
        }

        .search-input {
            width: 100%;
            padding: var(--space-3) var(--space-4) var(--space-3) var(--space-10);
            font-size: 14px;
            border: 1px solid var(--gray-300);
            border-radius: var(--radius-lg);
            background: white;
            transition: all var(--transition-base);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
        }

        .filter-select {
            padding: var(--space-3) var(--space-4);
            font-size: 14px;
            border: 1px solid var(--gray-300);
            border-radius: var(--radius-lg);
            background: white;
            min-width: 180px;
            cursor: pointer;
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--primary-500);
        }

        /* ============================================
           TABS
           ============================================ */
        .tabs {
            display: flex;
            gap: var(--space-1);
            padding: var(--space-1);
            background: var(--gray-100);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-6);
        }

        .tab-btn {
            flex: 1;
            padding: var(--space-3) var(--space-4);
            font-size: 14px;
            font-weight: 500;
            color: var(--gray-600);
            background: transparent;
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-base);
        }

        .tab-btn:hover {
            color: var(--gray-900);
        }

        .tab-btn.active {
            background: white;
            color: var(--primary-600);
            box-shadow: var(--shadow-sm);
        }

        /* ============================================
           MODAL - FIX OVERLAY
           ============================================ */
        body.modal-open {
            overflow: hidden;
        }

        /* ============================================
           MODAL
           ============================================ */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            padding: var(--space-6);
        }

        .modal-overlay.active {
            display: flex;
            animation: fadeIn 0.2s ease;
        }

        .modal {
            background: white;
            border-radius: var(--radius-2xl);
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow: hidden;
            box-shadow: var(--shadow-xl);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from { transform: translateY(-20px) scale(0.95); opacity: 0; }
            to { transform: translateY(0) scale(1); opacity: 1; }
        }

        .modal-header {
            padding: var(--space-6);
            border-bottom: 1px solid var(--gray-200);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--gray-900);
        }

        .modal-close {
            width: 32px;
            height: 32px;
            border: none;
            background: var(--gray-100);
            color: var(--gray-500);
            border-radius: var(--radius-md);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all var(--transition-base);
        }

        .modal-close:hover {
            background: var(--gray-200);
            color: var(--gray-700);
        }

        .modal-body {
            padding: var(--space-6);
            overflow-y: auto;
            max-height: calc(90vh - 180px);
        }

        .modal-footer {
            padding: var(--space-4) var(--space-6);
            border-top: 1px solid var(--gray-200);
            display: flex;
            gap: var(--space-3);
            justify-content: flex-end;
        }

        /* ============================================
           MODAL NOVA ORDEM DE PRODUÇÃO - ESTILO MODERNO
           ============================================ */
        #modal-nova-ordem {
            position: fixed !important;
            top: 0 !important;
            left: 0 !important;
            right: 0 !important;
            bottom: 0 !important;
            z-index: 99999 !important;
        }

        .modal-op-wrapper {
            display: flex;
            width: 95%;
            max-width: 1200px;
            max-height: 92vh;
            background: white;
            border-radius: 16px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            animation: modalSlideIn 0.3s ease;
            overflow: hidden;
        }

        .modal-op-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            min-width: 0;
        }

        .modal-op-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px;
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
            color: white;
        }

        .modal-op-title {
            font-size: 18px;
            font-weight: 600;
            color: white;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .modal-op-title::before {
            content: '';
            width: 32px;
            height: 32px;
            background: rgba(255,255,255,0.2);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-op-close {
            background: rgba(255,255,255,0.15);
            border: none;
            font-size: 14px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.2s;
        }

        .modal-op-close:hover {
            background: rgba(255,255,255,0.25);
        }

        .modal-op-body {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
            background: #f8f9fa;
        }

        /* Seção Produto */
        .modal-op-section {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        }

        .modal-op-product-row {
            display: flex;
            align-items: flex-end;
            gap: 16px;
            flex-wrap: wrap;
        }

        .modal-op-avatar {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 16px;
            flex-shrink: 0;
        }

        .modal-op-product-field {
            flex: 1;
            min-width: 200px;
        }

        .modal-op-label {
            display: block;
            font-size: 13px;
            font-weight: 500;
            color: #64748b;
            margin-bottom: 6px;
        }

        .modal-op-label i {
            font-size: 11px;
            color: #94a3b8;
            margin-left: 4px;
        }

        .modal-op-input-lg {
            width: 100%;
            padding: 12px 16px;
            font-size: 14px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            background: white;
            transition: all 0.2s;
        }

        .modal-op-input-lg:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
        }

        .modal-op-btn-outline {
            padding: 12px 20px;
            font-size: 14px;
            font-weight: 500;
            color: #64748b;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .modal-op-btn-outline:hover {
            background: #f8fafc;
            border-color: #cbd5e1;
        }

        .modal-op-date-field {
            min-width: 180px;
        }

        .modal-op-input-date {
            width: 100%;
            padding: 12px 16px;
            font-size: 14px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            background: white;
            cursor: pointer;
        }

        /* Seção Valores */
        .modal-op-values-row {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .modal-op-value-field {
            flex: 1;
            min-width: 140px;
            background: white;
            border-radius: 10px;
            padding: 14px 16px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.08);
        }

        .modal-op-value-field label {
            display: block;
            font-size: 12px;
            font-weight: 500;
            color: #64748b;
            margin-bottom: 6px;
        }

        .modal-op-value-field label i {
            font-size: 10px;
            color: #94a3b8;
            margin-left: 4px;
        }

        .modal-op-value-field input {
            width: 100%;
            padding: 8px 0;
            font-size: 15px;
            font-weight: 600;
            color: #1e293b;
            border: none;
            background: transparent;
        }

        .modal-op-value-field input:focus {
            outline: none;
        }

        .modal-op-value-field.highlight {
            background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
            border: 1px solid #93c5fd;
        }

        .modal-op-value-field.highlight input {
            color: #1d4ed8;
        }

        /* Seção Seleção */
        .modal-op-select-row {
            display: flex;
            align-items: flex-end;
            gap: 16px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .modal-op-select-field {
            flex: 1;
            min-width: 180px;
        }

        .modal-op-select-field label {
            display: block;
            font-size: 13px;
            font-weight: 500;
            color: #64748b;
            margin-bottom: 6px;
        }

        .modal-op-select-field select {
            width: 100%;
            padding: 12px 16px;
            font-size: 14px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%2364748b' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 12px center;
        }

        .modal-op-link {
            font-size: 13px;
            color: #3b82f6;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 12px 0;
        }

        .modal-op-link:hover {
            text-decoration: underline;
        }

        /* Abas */
        .modal-op-tabs {
            display: flex;
            gap: 0;
            background: white;
            border-radius: 12px 12px 0 0;
            border-bottom: 2px solid #e2e8f0;
            overflow-x: auto;
        }

        .modal-op-tab {
            padding: 14px 20px;
            font-size: 14px;
            font-weight: 500;
            color: #64748b;
            background: transparent;
            border: none;
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .modal-op-tab:hover {
            color: #1e293b;
            background: #f8fafc;
        }

        .modal-op-tab.active {
            color: #c0392b;
        }

        .modal-op-tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: #c0392b;
        }

        /* Conteúdo das Abas */
        .modal-op-tab-content {
            background: white;
            border-radius: 0 0 12px 12px;
            min-height: 300px;
        }

        .modal-op-tab-pane {
            display: none;
        }

        .modal-op-tab-pane.active {
            display: block;
        }

        /* Ações da Aba */
        .modal-op-tab-actions {
            display: flex;
            gap: 10px;
            padding: 16px 20px;
            border-bottom: 1px solid #f1f5f9;
        }

        .modal-op-btn-action {
            padding: 8px 16px;
            font-size: 13px;
            font-weight: 600;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.2s;
        }

        .modal-op-btn-action.add {
            background: #3b82f6;
            color: white;
        }

        .modal-op-btn-action.add:hover {
            background: #2563eb;
        }

        .modal-op-btn-action.edit {
            background: #10b981;
            color: white;
        }

        .modal-op-btn-action.edit:hover {
            background: #059669;
        }

        .modal-op-btn-action.delete {
            background: #ef4444;
            color: white;
        }

        .modal-op-btn-action.delete:hover {
            background: #dc2626;
        }

        /* Tabela */
        .modal-op-table-container {
            overflow-x: auto;
        }

        .modal-op-table {
            width: 100%;
            border-collapse: collapse;
        }

        .modal-op-table thead {
            background: #f8fafc;
        }

        .modal-op-table th {
            padding: 12px 16px;
            text-align: left;
            font-size: 13px;
            font-weight: 600;
            color: #475569;
            border-bottom: 1px solid #e2e8f0;
            white-space: nowrap;
        }

        .modal-op-table th i {
            font-size: 10px;
            color: #94a3b8;
            margin-left: 6px;
        }

        .modal-op-table tbody tr {
            border-bottom: 1px solid #f1f5f9;
        }

        .modal-op-table tbody tr:hover {
            background: #f8fafc;
        }

        .modal-op-table td {
            padding: 12px 16px;
            font-size: 14px;
            color: #334155;
        }

        .modal-op-empty-row td {
            text-align: center;
            padding: 48px 16px;
            color: #94a3b8;
        }

        .modal-op-empty-row i {
            font-size: 32px;
            display: block;
            margin-bottom: 12px;
        }

        /* Rodapé da Tabela */
        .modal-op-table-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 20px;
            background: #f8fafc;
            border-top: 1px solid #e2e8f0;
        }

        .modal-op-records-info {
            font-size: 13px;
            color: #64748b;
        }

        .modal-op-pagination {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .modal-op-page-btn {
            padding: 6px 12px;
            font-size: 13px;
            color: #64748b;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .modal-op-page-btn:hover:not(:disabled) {
            background: #f1f5f9;
            border-color: #cbd5e1;
        }

        .modal-op-page-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .modal-op-page-num {
            padding: 6px 12px;
            font-size: 13px;
            font-weight: 600;
            color: #64748b;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
        }

        .modal-op-page-num.active {
            color: white;
            background: #3b82f6;
            border-color: #3b82f6;
        }

        /* Informações Adicionais */
        .modal-op-info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            padding: 20px;
        }

        .modal-op-info-field {
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .modal-op-info-field label {
            font-size: 13px;
            font-weight: 500;
            color: #64748b;
        }

        .modal-op-info-field input,
        .modal-op-info-field select {
            padding: 12px 16px;
            font-size: 14px;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            background: white;
        }

        /* Observações */
        .modal-op-obs-field {
            padding: 20px;
        }

        .modal-op-obs-field label {
            display: block;
            font-size: 13px;
            font-weight: 500;
            color: #64748b;
            margin-bottom: 8px;
        }

        .modal-op-obs-field textarea {
            width: 100%;
            padding: 14px 16px;
            font-size: 14px;
            font-family: inherit;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            resize: vertical;
            min-height: 150px;
        }

        .modal-op-obs-field textarea:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
        }

        /* Footer Action */
        .modal-op-footer-action {
            padding: 16px 20px;
            background: white;
            border-top: 1px solid #e2e8f0;
            margin-top: 16px;
            border-radius: 12px;
        }

        .modal-op-btn-new {
            width: 100%;
            padding: 14px 24px;
            font-size: 15px;
            font-weight: 600;
            color: white;
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            border: none;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.2s;
        }

        .modal-op-btn-new:hover {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
        }

        /* Sidebar */
        .modal-op-sidebar {
            width: 140px;
            background: #f8fafc;
            border-left: 1px solid #e2e8f0;
            padding: 16px 12px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            overflow-y: auto;
            flex-shrink: 0;
        }

        .modal-op-sidebar-btn {
            width: 100%;
            padding: 10px 12px;
            font-size: 12px;
            font-weight: 500;
            color: #475569;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
            text-align: left;
        }

        .modal-op-sidebar-btn:hover {
            background: #f1f5f9;
            border-color: #cbd5e1;
        }

        .modal-op-sidebar-btn i {
            font-size: 14px;
            width: 18px;
            text-align: center;
        }

        .modal-op-sidebar-btn.primary {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            font-weight: 600;
        }

        .modal-op-sidebar-btn.primary:hover {
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .modal-op-sidebar-btn.highlight {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            border: none;
        }

        .modal-op-sidebar-btn.highlight:hover {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
        }

        .modal-op-sidebar-btn.outline {
            background: white;
            color: #3b82f6;
            border: 1px solid #3b82f6;
        }

        .modal-op-sidebar-btn.outline:hover {
            background: #eff6ff;
        }

        .modal-op-sidebar-btn.danger {
            color: #dc2626;
        }

        .modal-op-sidebar-btn.danger:hover {
            background: #fef2f2;
            border-color: #fecaca;
        }

        /* Responsivo */
        @media (max-width: 1024px) {
            .modal-op-wrapper {
                flex-direction: column;
                max-height: 95vh;
            }

            .modal-op-sidebar {
                width: 100%;
                flex-direction: row;
                flex-wrap: wrap;
                padding: 12px 16px;
                border-left: none;
                border-top: 1px solid #e2e8f0;
                justify-content: center;
            }

            .modal-op-sidebar-btn {
                width: auto;
                padding: 8px 14px;
            }

            .modal-op-product-row {
                flex-direction: column;
                align-items: stretch;
            }

            .modal-op-values-row {
                flex-direction: column;
            }

            .modal-op-value-field {
                min-width: 100%;
            }

            .modal-op-select-row {
                flex-direction: column;
            }

            .modal-op-info-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ============================================
           FORMS
           ============================================ */
        .form-group {
            margin-bottom: var(--space-5);
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: var(--gray-700);
            margin-bottom: var(--space-2);
        }

        .form-label .required {
            color: var(--danger-500);
            margin-left: 2px;
        }

        .form-input {
            width: 100%;
            padding: var(--space-3) var(--space-4);
            font-size: 14px;
            border: 1px solid var(--gray-300);
            border-radius: var(--radius-lg);
            background: white;
            transition: all var(--transition-base);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary-500);
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
        }

        .form-input::placeholder {
            color: var(--gray-400);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-4);
        }

        .form-row-3 {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: var(--space-4);
        }

        @media (max-width: 640px) {
            .form-row, .form-row-3 {
                grid-template-columns: 1fr;
            }
        }

        /* ============================================
           LOADING & SKELETON
           ============================================ */
        .skeleton {
            background: linear-gradient(90deg, var(--gray-200) 25%, var(--gray-100) 50%, var(--gray-200) 75%);
            background-size: 200% 100%;
            animation: skeleton-loading 1.5s infinite;
            border-radius: var(--radius-md);
        }

        @keyframes skeleton-loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--gray-200);
            border-top-color: var(--primary-500);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ============================================
           RESPONSIVE HELPERS
           ============================================ */
        @media (max-width: 768px) {
            .page-content {
                padding: var(--space-4);
            }

            .page-header-top {
                flex-direction: column;
                gap: var(--space-4);
            }

            .page-actions {
                width: 100%;
            }

            .page-actions .btn {
                flex: 1;
            }

            .header-user-info {
                display: none;
            }
        }

        /* ============================================
           DARK MODE
           ============================================ */
        body.dark-mode {
            --gray-50: #1e293b;
            --gray-100: #334155;
            --gray-200: #475569;
            --gray-300: #64748b;
            --gray-400: #94a3b8;
            --gray-500: #cbd5e1;
            --gray-600: #e2e8f0;
            --gray-700: #f1f5f9;
            --gray-800: #f8fafc;
            --gray-900: #ffffff;
        }

        body.dark-mode {
            background: var(--dark-bg);
        }

        body.dark-mode .main-content {
            background: var(--dark-bg);
        }

        body.dark-mode .card,
        body.dark-mode .stat-card {
            background: var(--dark-surface);
            border-color: var(--dark-border);
        }

        body.dark-mode .form-input,
        body.dark-mode .search-input,
        body.dark-mode .filter-select {
            background: var(--dark-surface);
            border-color: var(--dark-border);
            color: white;
        }

        /* ============================================
           ANIMAÇÕES
           ============================================ */
        .animate-pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .animate-bounce {
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(-5%); }
            50% { transform: translateY(0); }
        }
    </style></head>
<body>
    <div class="app-container">
        <!-- SIDEBAR -->
        <nav class="sidebar">
            <a href="/dashboard" class="sidebar-logo" title="Painel Principal">
                <i class="fas fa-home"></i>
            </a>
            
            <div class="sidebar-nav">
                <a href="index.html" class="sidebar-btn active" title="Dashboard">
                    <i class="fas fa-tachometer-alt"></i>
                </a>
                <a href="index.html" class="sidebar-btn" title="Produtos e Estoque" onclick="localStorage.setItem('pcp-view','produtos')">
                    <i class="fas fa-boxes"></i>
                </a>
                <a href="index.html" class="sidebar-btn" title="Ordem de Compra" onclick="localStorage.setItem('pcp-view','ordem-compra')">
                    <i class="fas fa-shopping-cart"></i>
                </a>
                <a href="ordens-producao.html" class="sidebar-btn" title="Ordens de Produção">
                    <i class="fas fa-clipboard-list"></i>
                </a>
                <a href="index.html" class="sidebar-btn" title="Programação de Faturamento" onclick="localStorage.setItem('pcp-view','faturamento')">
                    <i class="fas fa-file-invoice-dollar"></i>
                </a>
            </div>
            
            <div class="sidebar-bottom">
                <button class="sidebar-btn" title="Configurações" id="btn-config">
                    <i class="fas fa-cog"></i>
                </button>
            </div>
        </nav>

    <!-- Main Area -->
    <div class="main-area">
        <!-- Header -->
        <header class="header">
    <link rel="icon" type="image/x-icon" href="../../public/favicon-aluforce.webp">
            <div class="header-left">
                <div class="header-brand">
                    <span>PCP</span>
                    <span>|</span>
                    <span style="color: white;">Dashboard</span>
                </div>
            </div>
            
            <div class="header-right">
                <button class="header-btn" title="Atualizar" onclick="location.reload()">
                    <i class="fas fa-sync-alt"></i>
                </button>
                <button class="header-btn" title="Notificações">
                    <i class="fas fa-bell"></i>
                </button>
                
                <div class="user-greeting">
                    <span><span id="greeting-text">Bom dia</span>, <strong id="user-name">Usuário</strong></span>
                </div>
                
                <div class="user-avatar" id="user-avatar">
                    <img src="avatars/default.webp" alt="" id="user-photo">
                    <span id="user-initials" style="display:none;align-items:center;justify-content:center;width:100%;height:100%;color:white;font-weight:600;font-size:14px;border-radius:50%;">U</span>
                </div>
            </div>
        </header>

    <!-- MAIN CONTENT -->
    <main class="main-content">
        <!-- ============================================
             VIEW: DASHBOARD
             ============================================ -->
        <div id="view-dashboard" class="view active">
            <div class="page-content">
                <div class="page-header">
                    <div class="page-header-top">
                        <div class="page-title-wrapper">
                            <div class="page-icon blue">
                                <i class="fas fa-tachometer-alt"></i>
                            </div>
                            <div>
                                <h1 class="page-title">Dashboard PCP</h1>
                                <p class="page-subtitle">Visão geral do Planejamento e Controle da Produção</p>
                            </div>
                        </div>
                        <div class="page-actions">
                            <button class="btn btn-secondary" onclick="location.reload()">
                                <i class="fas fa-sync-alt"></i> Atualizar
                            </button>
                            <button class="btn btn-primary" onclick="showModal('modal-nova-ordem')">
                                <i class="fas fa-plus"></i> Nova Ordem
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="stat-card blue">
                        <div class="stat-icon blue">
                            <i class="fas fa-boxes"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Total de Produtos</div>
                            <div class="stat-value" id="stat-produtos">0</div>
                            <div class="stat-trend up">
                                <i class="fas fa-arrow-up"></i> Ativos no sistema
                            </div>
                        </div>
                    </div>

                    <div class="stat-card green">
                        <div class="stat-icon green">
                            <i class="fas fa-clipboard-check"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Ordens em Produção</div>
                            <div class="stat-value" id="stat-ordens">0</div>
                            <div class="stat-trend neutral">
                                <i class="fas fa-clock"></i> Em andamento
                            </div>
                        </div>
                    </div>

                    <div class="stat-card orange">
                        <div class="stat-icon orange">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Estoque Baixo</div>
                            <div class="stat-value" id="stat-estoque-baixo">0</div>
                            <div class="stat-trend down">
                                <i class="fas fa-arrow-down"></i> Requer atenção
                            </div>
                        </div>
                    </div>

                    <div class="stat-card cyan">
                        <div class="stat-icon cyan">
                            <i class="fas fa-truck"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Entregas Pendentes</div>
                            <div class="stat-value" id="stat-entregas">0</div>
                            <div class="stat-trend neutral">
                                <i class="fas fa-clock"></i> Esta semana
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Content Grid -->
                <div class="content-grid">
                    <!-- Quick Actions Card -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-bolt"></i> Ações Rápidas
                            </h3>
                        </div>
                        <div class="card-body">
                            <div class="quick-actions-list">
                                <button class="quick-action-btn" onclick="showModal('modal-nova-ordem')">
                                    <div class="quick-action-icon" style="background: linear-gradient(135deg, var(--primary-500), var(--primary-600));">
                                        <i class="fas fa-plus-circle"></i>
                                    </div>
                                    <div class="quick-action-content">
                                        <div class="quick-action-title">Nova Ordem de Produção</div>
                                        <div class="quick-action-desc">Criar uma nova ordem de produção</div>
                                    </div>
                                    <i class="fas fa-chevron-right"></i>
                                </button>

                                <button class="quick-action-btn" onclick="showModal('modal-novo-produto')">
                                    <div class="quick-action-icon" style="background: linear-gradient(135deg, var(--success-500), var(--success-600));">
                                        <i class="fas fa-box-open"></i>
                                    </div>
                                    <div class="quick-action-content">
                                        <div class="quick-action-title">Cadastrar Produto</div>
                                        <div class="quick-action-desc">Adicionar novo item ao catálogo</div>
                                    </div>
                                    <i class="fas fa-chevron-right"></i>
                                </button>

                                <button class="quick-action-btn" onclick="navigateTo('materiais')">
                                    <div class="quick-action-icon" style="background: linear-gradient(135deg, var(--warning-500), var(--warning-600));">
                                        <i class="fas fa-cubes"></i>
                                    </div>
                                    <div class="quick-action-content">
                                        <div class="quick-action-title">Gestão de Materiais</div>
                                        <div class="quick-action-desc">Controlar inventário de materiais</div>
                                    </div>
                                    <i class="fas fa-chevron-right"></i>
                                </button>

                                <button class="quick-action-btn" onclick="navigateTo('relatorios')">
                                    <div class="quick-action-icon" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">
                                        <i class="fas fa-chart-bar"></i>
                                    </div>
                                    <div class="quick-action-content">
                                        <div class="quick-action-title">Relatórios</div>
                                        <div class="quick-action-desc">Visualizar relatórios e análises</div>
                                    </div>
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Alerts Card -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-exclamation-triangle"></i> Alertas do Sistema
                            </h3>
                            <span class="badge badge-danger" id="alerts-count">0</span>
                        </div>
                        <div class="card-body" id="alerts-container">
                            <div class="empty-state">
                                <div class="empty-state-icon">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <h4 class="empty-state-title">Tudo certo!</h4>
                                <p class="empty-state-desc">Não há alertas no momento.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Recent Orders -->
                <div class="card" style="margin-top: var(--space-6);">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-clipboard-list"></i> Ordens Recentes
                        </h3>
                        <button class="btn btn-sm btn-secondary" onclick="navigateTo('ordens')">
                            Ver Todas <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                    <div class="card-body" style="padding: 0;">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Código</th>
                                        <th>Produto</th>
                                        <th>Quantidade</th>
                                        <th>Status</th>
                                        <th>Previsão</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="recent-orders-table">
                                    <tr>
                                        <td colspan="6" style="text-align: center; padding: 40px;">
                                            <div class="loading-spinner" style="margin: 0 auto;"></div>
                                            <p style="margin-top: 16px; color: var(--gray-500);">Carregando ordens...</p>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============================================
             VIEW: PRODUTOS E ESTOQUE (UNIFICADA)
             ============================================ -->
        <div id="view-produtos" class="view">
            <div class="page-content">
                <div class="page-header">
                    <div class="page-header-top">
                        <div class="page-title-wrapper">
                            <div class="page-icon green">
                                <i class="fas fa-boxes"></i>
                            </div>
                            <div>
                                <h1 class="page-title">Produtos e Estoque</h1>
                                <p class="page-subtitle">Gestão unificada de produtos e controle de estoque</p>
                            </div>
                        </div>
                        <div class="page-actions">
                            <button class="btn btn-secondary" onclick="exportarProdutos()">
                                <i class="fas fa-download"></i> Exportar
                            </button>
                            <button class="btn btn-success" onclick="showModal('modal-novo-produto')">
                                <i class="fas fa-plus"></i> Novo Produto
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Stats Cards Produtos -->
                <div class="stats-grid">
                    <div class="stat-card blue">
                        <div class="stat-icon blue">
                            <i class="fas fa-box"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Total de Produtos</div>
                            <div class="stat-value" id="produtos-total">0</div>
                            <div class="stat-trend up">
                                <i class="fas fa-check"></i> Cadastraçãos
                            </div>
                        </div>
                    </div>

                    <div class="stat-card green">
                        <div class="stat-icon green">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Estoque Normal</div>
                            <div class="stat-value" id="produtos-normal">0</div>
                            <div class="stat-trend up">
                                <i class="fas fa-thumbs-up"></i> Saudável
                            </div>
                        </div>
                    </div>

                    <div class="stat-card orange">
                        <div class="stat-icon orange">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Estoque Baixo</div>
                            <div class="stat-value" id="produtos-baixo">0</div>
                            <div class="stat-trend down">
                                <i class="fas fa-arrow-down"></i> Atenção
                            </div>
                        </div>
                    </div>

                    <div class="stat-card red">
                        <div class="stat-icon red">
                            <i class="fas fa-times-circle"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Nível Crítico</div>
                            <div class="stat-value" id="produtos-critico">0</div>
                            <div class="stat-trend down">
                                <i class="fas fa-exclamation"></i> Urgente
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tabs de Navegação -->
                <div class="tabs">
                    <button class="tab-btn active" data-tab="todos">
                        <i class="fas fa-list"></i> Todos os Produtos
                    </button>
                    <button class="tab-btn" data-tab="estoque-baixo">
                        <i class="fas fa-exclamation-triangle"></i> Estoque Baixo
                    </button>
                    <button class="tab-btn" data-tab="movimentacoes">
                        <i class="fas fa-exchange-alt"></i> Movimentações
                    </button>
                    <button class="tab-btn" data-tab="categorias">
                        <i class="fas fa-tags"></i> Categorias
                    </button>
                </div>

                <!-- Barra de Busca -->
                <div class="search-bar">
                    <div class="search-input-wrapper">
                        <i class="fas fa-search"></i>
                        <input type="text" class="search-input" id="search-produtos" placeholder="Buscar por código, nome, SKU ou GTIN...">
                    </div>
                    <select class="filter-select" id="filter-categoria">
                        <option value="">Todas as Categorias</option>
                        <option value="cabos">Cabos</option>
                        <option value="fios">Fios</option>
                        <option value="acessorios">Acessórios</option>
                        <option value="conexoes">Conexões</option>
                    </select>
                    <select class="filter-select" id="filter-estoque">
                        <option value="">Todos os Status</option>
                        <option value="normal">Estoque Normal</option>
                        <option value="baixo">Estoque Baixo</option>
                        <option value="critico">Nível Crítico</option>
                    </select>
                    <button class="btn btn-primary" onclick="buscarProdutos()">
                        <i class="fas fa-search"></i> Buscar
                    </button>
                </div>

                <!-- Tabela de Produtos -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-table"></i> Catálogo de Produtos
                        </h3>
                        <div style="display: flex; gap: 8px;">
                            <button class="btn btn-sm btn-secondary view-toggle active" data-view="table">
                                <i class="fas fa-table"></i>
                            </button>
                            <button class="btn btn-sm btn-secondary view-toggle" data-view="cards">
                                <i class="fas fa-th-large"></i>
                            </button>
                        </div>
                    </div>
                    <div class="card-body" style="padding: 0;">
                        <div class="table-container" id="produtos-table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Código</th>
                                        <th>Nome / Descrição</th>
                                        <th>SKU</th>
                                        <th>Categoria</th>
                                        <th>Estoque</th>
                                        <th>Mínimo</th>
                                        <th>Preço</th>
                                        <th>Status</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="produtos-table-body">
                                    <tr>
                                        <td colspan="9" style="text-align: center; padding: 60px;">
                                            <div class="loading-spinner" style="margin: 0 auto;"></div>
                                            <p style="margin-top: 16px; color: var(--gray-500);">Carregando produtos...</p>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Grid View (hidden by default) -->
                        <div class="products-grid" id="produtos-grid-container" style="display: none; padding: 24px; display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
                            <!-- Cards serão inseridos via JS -->
                        </div>
                    </div>
                    <div class="card-footer">
                        <div style="display: flex; align-items: center; justify-content: space-between;">
                            <span style="font-size: 14px; color: var(--gray-500);">
                                Mostrando <strong id="produtos-showing">0</strong> de <strong id="produtos-total-count">0</strong> produtos
                            </span>
                            <div class="pagination" id="produtos-pagination">
                                <!-- Paginação será inserida via JS -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============================================
             VIEW: MATERIAIS
             ============================================ -->
        <div id="view-materiais" class="view">
            <div class="page-content">
                <div class="page-header">
                    <div class="page-header-top">
                        <div class="page-title-wrapper">
                            <div class="page-icon orange">
                                <i class="fas fa-cubes"></i>
                            </div>
                            <div>
                                <h1 class="page-title">Gestão de Materiais</h1>
                                <p class="page-subtitle">Controle completo do inventário de materiais</p>
                            </div>
                        </div>
                        <div class="page-actions">
                            <button class="btn btn-secondary" onclick="exportarMateriais()">
                                <i class="fas fa-file-export"></i> Exportar PDF
                            </button>
                            <button class="btn btn-primary" onclick="showModal('modal-novo-material')">
                                <i class="fas fa-plus"></i> Novo Material
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Stats Cards Materiais -->
                <div class="stats-grid">
                    <div class="stat-card blue">
                        <div class="stat-icon blue">
                            <i class="fas fa-layer-group"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Materiais Ativos</div>
                            <div class="stat-value" id="materiais-total">0</div>
                            <div class="stat-trend up">
                                <i class="fas fa-arrow-up"></i> +5.2% este mês
                            </div>
                        </div>
                    </div>

                    <div class="stat-card green">
                        <div class="stat-icon green">
                            <i class="fas fa-warehouse"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Valor em Estoque</div>
                            <div class="stat-value" id="materiais-valor">R$ 0</div>
                            <div class="stat-trend up">
                                <i class="fas fa-chart-line"></i> Atualização
                            </div>
                        </div>
                    </div>

                    <div class="stat-card orange">
                        <div class="stat-icon orange">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Pendentes Recebimento</div>
                            <div class="stat-value" id="materiais-pendentes">0</div>
                            <div class="stat-trend neutral">
                                <i class="fas fa-truck"></i> Em trânsito
                            </div>
                        </div>
                    </div>

                    <div class="stat-card red">
                        <div class="stat-icon red">
                            <i class="fas fa-bell"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Requer Atenção</div>
                            <div class="stat-value" id="materiais-alerta">0</div>
                            <div class="stat-trend down">
                                <i class="fas fa-exclamation"></i> Verificar
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Barra de Busca Materiais -->
                <div class="search-bar">
                    <div class="search-input-wrapper">
                        <i class="fas fa-search"></i>
                        <input type="text" class="search-input" id="search-materiais" placeholder="Buscar material por código, nome ou fornecedor...">
                    </div>
                    <select class="filter-select" id="filter-tipo-material">
                        <option value="">Todos os Tipos</option>
                        <option value="materia-prima">Matéria Prima</option>
                        <option value="componente">Componente</option>
                        <option value="embalagem">Embalagem</option>
                        <option value="insumo">Insumo</option>
                    </select>
                    <button class="btn btn-primary" onclick="buscarMateriais()">
                        <i class="fas fa-search"></i> Buscar
                    </button>
                </div>

                <!-- Tabela de Materiais -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-clipboard-list"></i> Lista de Materiais
                        </h3>
                    </div>
                    <div class="card-body" style="padding: 0;">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Código</th>
                                        <th>Material</th>
                                        <th>Tipo</th>
                                        <th>Unidade</th>
                                        <th>Qtd Atual</th>
                                        <th>Mínimo</th>
                                        <th>Fornecedor</th>
                                        <th>Status</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="materiais-table-body">
                                    <tr>
                                        <td colspan="9" style="text-align: center; padding: 60px;">
                                            <div class="loading-spinner" style="margin: 0 auto;"></div>
                                            <p style="margin-top: 16px; color: var(--gray-500);">Carregando materiais...</p>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============================================
             VIEW: ORDEM DE COMPRA
             ============================================ -->
        <div id="view-ordem-compra" class="view">
            <div class="page-content">
                <div class="page-header">
                    <div class="page-header-top">
                        <div class="page-title-wrapper">
                            <div class="page-icon purple">
                                <i class="fas fa-shopping-cart"></i>
                            </div>
                            <div>
                                <h1 class="page-title">Ordem de Compra</h1>
                                <p class="page-subtitle">Geração e controle de ordens de compra</p>
                            </div>
                        </div>
                        <div class="page-actions">
                            <button class="btn btn-primary" onclick="showModal('modal-nova-oc')">
                                <i class="fas fa-plus"></i> Nova OC
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Stats Cards OC -->
                <div class="stats-grid">
                    <div class="stat-card blue">
                        <div class="stat-icon blue">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">OCs Abertas</div>
                            <div class="stat-value" id="oc-abertas">0</div>
                        </div>
                    </div>

                    <div class="stat-card green">
                        <div class="stat-icon green">
                            <i class="fas fa-check-double"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Aprovadas</div>
                            <div class="stat-value" id="oc-aprovadas">0</div>
                        </div>
                    </div>

                    <div class="stat-card orange">
                        <div class="stat-icon orange">
                            <i class="fas fa-hourglass-half"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Aguardando</div>
                            <div class="stat-value" id="oc-aguardando">0</div>
                        </div>
                    </div>

                    <div class="stat-card cyan">
                        <div class="stat-icon cyan">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Valor Total</div>
                            <div class="stat-value" id="oc-valor">R$ 0</div>
                        </div>
                    </div>
                </div>

                <!-- Tabela de OCs -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-list-alt"></i> Ordens de Compra
                        </h3>
                    </div>
                    <div class="card-body" style="padding: 0;">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>NÂº OC</th>
                                        <th>Fornecedor</th>
                                        <th>Data</th>
                                        <th>Previsão Entrega</th>
                                        <th>Valor Total</th>
                                        <th>Status</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="oc-table-body">
                                    <tr>
                                        <td colspan="7" style="text-align: center; padding: 60px;">
                                            <div class="empty-state">
                                                <div class="empty-state-icon">
                                                    <i class="fas fa-shopping-cart"></i>
                                                </div>
                                                <h4 class="empty-state-title">Nenhuma OC encontrada</h4>
                                                <p class="empty-state-desc">Clique em "Nova OC" para criar uma ordem de compra.</p>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============================================
             VIEW: FATURAMENTO
             ============================================ -->
        <div id="view-faturamento" class="view">
            <div class="page-content">
                <div class="page-header">
                    <div class="page-header-top">
                        <div class="page-title-wrapper">
                            <div class="page-icon cyan">
                                <i class="fas fa-file-invoice-dollar"></i>
                            </div>
                            <div>
                                <h1 class="page-title">Programação de Faturamento</h1>
                                <p class="page-subtitle">Controle de faturamento e expedição</p>
                            </div>
                        </div>
                        <div class="page-actions">
                            <button class="btn btn-primary" onclick="showModal('modal-novo-faturamento')">
                                <i class="fas fa-plus"></i> Novo Faturamento
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Stats Cards Faturamento -->
                <div class="stats-grid">
                    <div class="stat-card blue">
                        <div class="stat-icon blue">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Programaçãos</div>
                            <div class="stat-value" id="fat-programaçãos">0</div>
                        </div>
                    </div>

                    <div class="stat-card green">
                        <div class="stat-icon green">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Faturaçãos</div>
                            <div class="stat-value" id="fat-emitidos">0</div>
                        </div>
                    </div>

                    <div class="stat-card orange">
                        <div class="stat-icon orange">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Pendentes</div>
                            <div class="stat-value" id="fat-pendentes">0</div>
                        </div>
                    </div>

                    <div class="stat-card red">
                        <div class="stat-icon red">
                            <i class="fas fa-times-circle"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Cancelados</div>
                            <div class="stat-value" id="fat-cancelados">0</div>
                        </div>
                    </div>
                </div>

                <!-- Tabs Faturamento -->
                <div class="tabs">
                    <button class="tab-btn active" data-tab-fat="todos">
                        <i class="fas fa-list"></i> Todos
                    </button>
                    <button class="tab-btn" data-tab-fat="programaçãos">
                        <i class="fas fa-clock"></i> Programaçãos
                    </button>
                    <button class="tab-btn" data-tab-fat="emitidos">
                        <i class="fas fa-check-circle"></i> Emitidos
                    </button>
                    <button class="tab-btn" data-tab-fat="cancelados">
                        <i class="fas fa-times-circle"></i> Cancelados
                    </button>
                </div>

                <!-- Lista de Faturamentos -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-file-invoice"></i> Lista de Faturamentos
                        </h3>
                    </div>
                    <div class="card-body" style="padding: 0;">
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>NÂº Pedido</th>
                                        <th>Cliente</th>
                                        <th>Data Programada</th>
                                        <th>Valor</th>
                                        <th>Status</th>
                                        <th>Ações</th>
                                    </tr>
                                </thead>
                                <tbody id="faturamento-table-body">
                                    <tr>
                                        <td colspan="6" style="text-align: center; padding: 60px;">
                                            <div class="loading-spinner" style="margin: 0 auto;"></div>
                                            <p style="margin-top: 16px; color: var(--gray-500);">Carregando faturamentos...</p>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ============================================
             VIEW: RELATÃ“RIOS
             ============================================ -->
        <div id="view-relatorios" class="view">
            <div class="page-content">
                <div class="page-header">
                    <div class="page-header-top">
                        <div class="page-title-wrapper">
                            <div class="page-icon purple">
                                <i class="fas fa-chart-bar"></i>
                            </div>
                            <div>
                                <h1 class="page-title">Relatórios</h1>
                                <p class="page-subtitle">Análises e relatórios do sistema PCP</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Grid de Relatórios -->
                <div class="content-grid-3">
                    <div class="card" style="cursor: pointer;" onclick="gerarRelatorio('producao')">
                        <div class="card-body" style="text-align: center; padding: 40px;">
                            <div style="width: 64px; height: 64px; background: linear-gradient(135deg, var(--primary-500), var(--primary-600)); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
                                <i class="fas fa-industry" style="font-size: 28px; color: white;"></i>
                            </div>
                            <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 8px;">Relatório de Produção</h3>
                            <p style="font-size: 14px; color: var(--gray-500);">Análise detalhada da produção por período</p>
                        </div>
                    </div>

                    <div class="card" style="cursor: pointer;" onclick="gerarRelatorio('estoque')">
                        <div class="card-body" style="text-align: center; padding: 40px;">
                            <div style="width: 64px; height: 64px; background: linear-gradient(135deg, var(--success-500), var(--success-600)); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
                                <i class="fas fa-boxes" style="font-size: 28px; color: white;"></i>
                            </div>
                            <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 8px;">Relatório de Estoque</h3>
                            <p style="font-size: 14px; color: var(--gray-500);">Posição atual e movimentações</p>
                        </div>
                    </div>

                    <div class="card" style="cursor: pointer;" onclick="gerarRelatorio('materiais')">
                        <div class="card-body" style="text-align: center; padding: 40px;">
                            <div style="width: 64px; height: 64px; background: linear-gradient(135deg, var(--warning-500), var(--warning-600)); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
                                <i class="fas fa-cubes" style="font-size: 28px; color: white;"></i>
                            </div>
                            <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 8px;">Relatório de Materiais</h3>
                            <p style="font-size: 14px; color: var(--gray-500);">Consumo e necessidades de materiais</p>
                        </div>
                    </div>

                    <div class="card" style="cursor: pointer;" onclick="gerarRelatorio('entregas')">
                        <div class="card-body" style="text-align: center; padding: 40px;">
                            <div style="width: 64px; height: 64px; background: linear-gradient(135deg, var(--info-500), var(--info-600)); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
                                <i class="fas fa-truck" style="font-size: 28px; color: white;"></i>
                            </div>
                            <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 8px;">Relatório de Entregas</h3>
                            <p style="font-size: 14px; color: var(--gray-500);">Prazos e performance de entregas</p>
                        </div>
                    </div>

                    <div class="card" style="cursor: pointer;" onclick="gerarRelatorio('compras')">
                        <div class="card-body" style="text-align: center; padding: 40px;">
                            <div style="width: 64px; height: 64px; background: linear-gradient(135deg, #8b5cf6, #7c3aed); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
                                <i class="fas fa-shopping-cart" style="font-size: 28px; color: white;"></i>
                            </div>
                            <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 8px;">Relatório de Compras</h3>
                            <p style="font-size: 14px; color: var(--gray-500);">Análise de compras e fornecedores</p>
                        </div>
                    </div>

                    <div class="card" style="cursor: pointer;" onclick="gerarRelatorio('kpis')">
                        <div class="card-body" style="text-align: center; padding: 40px;">
                            <div style="width: 64px; height: 64px; background: linear-gradient(135deg, var(--danger-500), var(--danger-600)); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
                                <i class="fas fa-tachometer-alt" style="font-size: 28px; color: white;"></i>
                            </div>
                            <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 8px;">KPIs de Performance</h3>
                            <p style="font-size: 14px; color: var(--gray-500);">Indicaçãores chave de desempenho</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    </div> <!-- Fecha main-area -->
    </div> <!-- Fecha app-container -->

    <!-- ============================================
         MODAIS
         ============================================ -->
    
    <!-- Modal: Nova Ordem de Produção -->
    <div class="modal-overlay" id="modal-nova-ordem">
        <div class="modal-op-wrapper">
            <!-- Ãrea Principal do Modal -->
            <div class="modal-op-main">
                <!-- Header do Modal -->
                <div class="modal-op-header">
                    <h3 class="modal-op-title">Nova Ordem de Produção</h3>
                    <button class="modal-op-close" onclick="hideModal('modal-nova-ordem')">
                        Fechar <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <!-- Conteúdo do Modal -->
                <div class="modal-op-body">
                    <!-- Seção: Produto -->
                    <div class="modal-op-section">
                        <div class="modal-op-product-row">
                            <div class="modal-op-avatar">
                                <span>OP</span>
                            </div>
                            <div class="modal-op-product-field">
                                <label class="modal-op-label">Produto <i class="fas fa-external-link-alt"></i></label>
                                <input type="text" class="modal-op-input-lg" id="op-produto" placeholder="Selecione o produto...">
                            </div>
                            <button class="modal-op-btn-outline" onclick="buscarProdutoOP()">
                                <i class="fas fa-search"></i> Buscar Produto
                            </button>
                            <div class="modal-op-date-field">
                                <label class="modal-op-label">Previsão de Conclusão <i class="fas fa-info-circle"></i></label>
                                <input type="date" class="modal-op-input-date" id="op-previsao">
                            </div>
                        </div>
                    </div>
                    
                    <!-- Seção: Campos de Valores -->
                    <div class="modal-op-values-row">
                        <div class="modal-op-value-field">
                            <label>Quantidade a Produzir</label>
                            <input type="number" id="op-quantidade" value="1" min="1">
                        </div>
                        <div class="modal-op-value-field">
                            <label>Custo Estimação <i class="fas fa-pencil-alt"></i></label>
                            <input type="text" id="op-custo-estimação" value="0,00">
                        </div>
                        <div class="modal-op-value-field">
                            <label>Custo Mão de Obra</label>
                            <input type="text" id="op-custo-mao-obra" value="0,00">
                        </div>
                        <div class="modal-op-value-field">
                            <label>Custo Materiais</label>
                            <input type="text" id="op-custo-materiais" value="0,00">
                        </div>
                        <div class="modal-op-value-field highlight">
                            <label>Custo Total</label>
                            <input type="text" id="op-custo-total" value="R$ 0,00" reaçãonly>
                        </div>
                    </div>
                    
                    <!-- Seção: Campos de Seleção -->
                    <div class="modal-op-select-row">
                        <div class="modal-op-select-field">
                            <label>Responsável *</label>
                            <select id="op-responsavel">
                                <option value="">Selecione o responsável...</option>
                                <option value="1">João Silva</option>
                                <option value="2">Maria Santos</option>
                            </select>
                        </div>
                        <div class="modal-op-select-field">
                            <label>Prioridade <i class="fas fa-pencil-alt"></i></label>
                            <select id="op-prioridade">
                                <option value="normal">Normal</option>
                                <option value="alta">Alta</option>
                                <option value="urgente">Urgente</option>
                            </select>
                        </div>
                        <div class="modal-op-select-field">
                            <label>Centro de Custo</label>
                            <select id="op-centro-custo">
                                <option value="">Padrão</option>
                                <option value="1">Produção</option>
                                <option value="2">Manutenção</option>
                            </select>
                        </div>
                        <a href="#" class="modal-op-link" onclick="atualizarCustosOP()">
                            <i class="fas fa-sync-alt"></i> Atualizar custos dos itens
                        </a>
                    </div>
                    
                    <!-- Abas -->
                    <div class="modal-op-tabs">
                        <button class="modal-op-tab active" data-tab="itens" onclick="switchOPTab('itens')">
                            Itens da Produção
                        </button>
                        <button class="modal-op-tab" data-tab="materiais" onclick="switchOPTab('materiais')">
                            Materiais
                        </button>
                        <button class="modal-op-tab" data-tab="mao-obra" onclick="switchOPTab('mao-obra')">
                            Mão de Obra
                        </button>
                        <button class="modal-op-tab" data-tab="info" onclick="switchOPTab('info')">
                            Informações Adicionais
                        </button>
                        <button class="modal-op-tab" data-tab="obs" onclick="switchOPTab('obs')">
                            Observações
                        </button>
                    </div>
                    
                    <!-- Conteúdo das Abas -->
                    <div class="modal-op-tab-content">
                        <!-- Aba: Itens da Produção -->
                        <div class="modal-op-tab-pane active" id="op-tab-itens">
                            <!-- Botões de Ação -->
                            <div class="modal-op-tab-actions">
                                <button class="modal-op-btn-action add" onclick="novoItemOP()">
                                    <i class="fas fa-plus"></i> Novo Item
                                </button>
                                <button class="modal-op-btn-action edit" onclick="editarItemOP()">
                                    <i class="fas fa-pencil-alt"></i> Editar Item
                                </button>
                                <button class="modal-op-btn-action delete" onclick="excluirItemOP()">
                                    <i class="fas fa-trash"></i> Excluir Item
                                </button>
                            </div>
                            
                            <!-- Tabela -->
                            <div class="modal-op-table-container">
                                <table class="modal-op-table">
                                    <thead>
                                        <tr>
                                            <th>Produto <i class="fas fa-sort"></i></th>
                                            <th>Descrição do Produto</th>
                                            <th>Quantidade</th>
                                            <th>Quantidade (Parcial)</th>
                                            <th>Local de Estoque</th>
                                            <th>Custo Unitário</th>
                                        </tr>
                                    </thead>
                                    <tbody id="op-itens-tbody">
                                        <tr class="modal-op-empty-row">
                                            <td colspan="6">
                                                <i class="fas fa-inbox"></i>
                                                <span>Nenhum item adicionação</span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- Rodapé da Tabela -->
                            <div class="modal-op-table-footer">
                                <span class="modal-op-records-info">0 - 0 de 0 registros</span>
                                <div class="modal-op-pagination">
                                    <button class="modal-op-page-btn" disabled><i class="fas fa-angle-double-left"></i></button>
                                    <button class="modal-op-page-btn" disabled><i class="fas fa-angle-left"></i> anterior</button>
                                    <span class="modal-op-page-num active">1</span>
                                    <button class="modal-op-page-btn">próximo <i class="fas fa-angle-right"></i></button>
                                    <button class="modal-op-page-btn"><i class="fas fa-angle-double-right"></i></button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Aba: Materiais -->
                        <div class="modal-op-tab-pane" id="op-tab-materiais">
                            <div class="modal-op-tab-actions">
                                <button class="modal-op-btn-action add" onclick="novoMaterialOP()">
                                    <i class="fas fa-plus"></i> Novo Material
                                </button>
                            </div>
                            <div class="modal-op-table-container">
                                <table class="modal-op-table">
                                    <thead>
                                        <tr>
                                            <th>Código</th>
                                            <th>Material</th>
                                            <th>Quantidade</th>
                                            <th>Unidade</th>
                                            <th>Custo Unit.</th>
                                            <th>Custo Total</th>
                                        </tr>
                                    </thead>
                                    <tbody id="op-materiais-tbody">
                                        <tr class="modal-op-empty-row">
                                            <td colspan="6">
                                                <i class="fas fa-inbox"></i>
                                                <span>Nenhum material adicionação</span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Aba: Mão de Obra -->
                        <div class="modal-op-tab-pane" id="op-tab-mao-obra">
                            <div class="modal-op-tab-actions">
                                <button class="modal-op-btn-action add" onclick="novaMaoObraOP()">
                                    <i class="fas fa-plus"></i> Adicionar Mão de Obra
                                </button>
                            </div>
                            <div class="modal-op-table-container">
                                <table class="modal-op-table">
                                    <thead>
                                        <tr>
                                            <th>Funcionário</th>
                                            <th>Função</th>
                                            <th>Horas</th>
                                            <th>Valor/Hora</th>
                                            <th>Total</th>
                                        </tr>
                                    </thead>
                                    <tbody id="op-mao-obra-tbody">
                                        <tr class="modal-op-empty-row">
                                            <td colspan="5">
                                                <i class="fas fa-inbox"></i>
                                                <span>Nenhuma mão de obra adicionada</span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Aba: Informações Adicionais -->
                        <div class="modal-op-tab-pane" id="op-tab-info">
                            <div class="modal-op-info-grid">
                                <div class="modal-op-info-field">
                                    <label>Cliente</label>
                                    <input type="text" id="op-cliente" placeholder="Nome do cliente">
                                </div>
                                <div class="modal-op-info-field">
                                    <label>Pedido de Venda</label>
                                    <input type="text" id="op-pedido-venda" placeholder="NÂº do pedido">
                                </div>
                                <div class="modal-op-info-field">
                                    <label>Lote</label>
                                    <input type="text" id="op-lote" placeholder="Número do lote">
                                </div>
                                <div class="modal-op-info-field">
                                    <label>Setor</label>
                                    <select id="op-setor">
                                        <option value="">Selecione...</option>
                                        <option value="1">Produção</option>
                                        <option value="2">Montagem</option>
                                        <option value="3">Acabamento</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Aba: Observações -->
                        <div class="modal-op-tab-pane" id="op-tab-obs">
                            <div class="modal-op-obs-field">
                                <label>Observações da Ordem de Produção</label>
                                <textarea id="op-observacoes" rows="6" placeholder="Digite as observações..."></textarea>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Footer com Nova OP -->
                    <div class="modal-op-footer-action">
                        <button class="modal-op-btn-new" onclick="novaOrdemProducaoRapida()">
                            <i class="fas fa-plus-circle"></i> Nova Ordem de Produção
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Sidebar de Ações -->
            <div class="modal-op-sidebar">
                <button class="modal-op-sidebar-btn primary" onclick="salvarOrdemProducao()">
                    <i class="fas fa-save"></i> Salvar
                </button>
                <button class="modal-op-sidebar-btn" onclick="incluirOP()">
                    <i class="fas fa-plus"></i> Incluir
                </button>
                <button class="modal-op-sidebar-btn" onclick="imprimirOP()">
                    <i class="fas fa-print"></i> Imprimir
                </button>
                <button class="modal-op-sidebar-btn" onclick="duplicarOP()">
                    <i class="fas fa-copy"></i> Duplicar
                </button>
                <button class="modal-op-sidebar-btn" onclick="conferirOP()">
                    <i class="fas fa-check-circle"></i> Conferir
                </button>
                <button class="modal-op-sidebar-btn highlight" onclick="iniciarProducao()">
                    <i class="fas fa-play"></i> Iniciar Produção
                </button>
                <button class="modal-op-sidebar-btn" onclick="anexosOP()">
                    <i class="fas fa-paperclip"></i> Anexos
                </button>
                <button class="modal-op-sidebar-btn" onclick="historicoOP()">
                    <i class="fas fa-history"></i> Histórico de Alterações
                </button>
                <button class="modal-op-sidebar-btn" onclick="tarefasOP()">
                    <i class="fas fa-tasks"></i> Tarefas
                </button>
                <button class="modal-op-sidebar-btn outline" onclick="ordemParcial()">
                    <i class="fas fa-divide"></i> Ordem Parcial
                </button>
                <button class="modal-op-sidebar-btn danger" onclick="excluirOP()">
                    <i class="fas fa-trash"></i> Excluir
                </button>
                <button class="modal-op-sidebar-btn" onclick="cancelarOP()">
                    <i class="fas fa-ban"></i> Cancelar
                </button>
            </div>
        </div>
    </div>

    <!-- Modal: Novo Produto -->
    <div class="modal-overlay" id="modal-novo-produto">
        <div class="modal" style="max-width: 900px;">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-box-open"></i> Cadastrar Novo Produto</h3>
                <button class="modal-close" onclick="hideModal('modal-novo-produto')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="form-novo-produto">
                    <div class="form-row-3">
                        <div class="form-group">
                            <label class="form-label">Código <span class="required">*</span></label>
                            <input type="text" class="form-input" name="codigo" required placeholder="Ex: PROD001">
                        </div>
                        <div class="form-group">
                            <label class="form-label">SKU</label>
                            <input type="text" class="form-input" name="sku" placeholder="SKU do produto">
                        </div>
                        <div class="form-group">
                            <label class="form-label">GTIN/EAN</label>
                            <input type="text" class="form-input" name="gtin" placeholder="Código de barras">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Nome do Produto <span class="required">*</span></label>
                        <input type="text" class="form-input" name="nome" required placeholder="Nome completo do produto">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Descrição</label>
                        <textarea class="form-input" name="descricao" rows="2" placeholder="Descrição detalhada..."></textarea>
                    </div>
                    <div class="form-row-3">
                        <div class="form-group">
                            <label class="form-label">Categoria</label>
                            <select class="form-input" name="categoria">
                                <option value="">Selecione...</option>
                                <option value="cabos">Cabos</option>
                                <option value="fios">Fios</option>
                                <option value="acessorios">Acessórios</option>
                                <option value="conexoes">Conexões</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Unidade</label>
                            <select class="form-input" name="unidade">
                                <option value="un">Unidade (UN)</option>
                                <option value="m">Metro (M)</option>
                                <option value="kg">Quilograma (KG)</option>
                                <option value="cx">Caixa (CX)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">NCM</label>
                            <input type="text" class="form-input" name="ncm" placeholder="00000000">
                        </div>
                    </div>
                    <div class="form-row-3">
                        <div class="form-group">
                            <label class="form-label">Preço de Venda</label>
                            <input type="text" class="form-input" name="preco" placeholder="R$ 0,00">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Estoque Atual</label>
                            <input type="number" class="form-input" name="estoque" placeholder="0">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Estoque Mínimo</label>
                            <input type="number" class="form-input" name="estoque_minimo" placeholder="0">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('modal-novo-produto')">Cancelar</button>
                <button class="btn btn-success" onclick="salvarProduto()">
                    <i class="fas fa-save"></i> Cadastrar Produto
                </button>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script>
        // ============================================
        // NAVEGAÇÃO ENTRE VIEWS
        // ============================================
        function navigateTo(viewName) {
            // Esconde todas as views
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            
            // Mostra a view selecionada
            const view = document.getElementById('view-' + viewName);
            if (view) {
                view.classList.add('active');
            }
            
            // Atualiza botões da sidebar
            document.querySelectorAll('.sidebar-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.view === viewName) {
                    btn.classList.add('active');
                }
            });
        }

        // Event listeners para navegação
        document.querySelectorAll('.sidebar-btn[data-view]').forEach(btn => {
            btn.addEventListener('click', () => {
                navigateTo(btn.dataset.view);
            });
        });

        // ============================================
        // DARK MODE
        // ============================================
        const darkModeBtn = document.getElementById('btn-dark-mode');
        darkModeBtn.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            const icon = darkModeBtn.querySelector('i');
            icon.classList.toggle('fa-moon');
            icon.classList.toggle('fa-sun');
            localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
        });

        // Carregar preferência salva
        if (localStorage.getItem('darkMode') === 'true') {
            document.body.classList.add('dark-mode');
            const icon = darkModeBtn.querySelector('i');
            if (icon) {
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
            }
        }

        // ============================================
        // MODAIS
        // ============================================
        function showModal(modalId) {
            const overlay = document.getElementById(modalId);
            if (overlay) {
                document.body.classList.add('modal-open');
                overlay.classList.add('active');
                // Força o modal para o final do body para evitar problemas de stacking context
                document.body.appendChild(overlay);
            }
        }

        function hideModal(modalId) {
            const overlay = document.getElementById(modalId);
            if (overlay) {
                overlay.classList.remove('active');
                document.body.classList.remove('modal-open');
            }
        }

        // Fechar modal ao clicar fora
        document.querySelectorAll('.modal-overlay').forEach(overlay => {
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    overlay.classList.remove('active');
                }
            });
        });

        // ============================================
        // REFRESH
        // ============================================
        document.getElementById('btn-refresh').addEventListener('click', () => {
            location.reload();
        });

        // ============================================
        // MODAL NOVA ORDEM DE PRODUÇÃO
        // ============================================
        
        // Alternar entre abas
        function switchOPTab(tabName) {
            // Remove active de todas as abas
            document.querySelectorAll('.modal-op-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.modal-op-tab-pane').forEach(pane => {
                pane.classList.remove('active');
            });
            
            // Ativa a aba selecionada
            document.querySelector(`.modal-op-tab[data-tab="${tabName}"]`).classList.add('active');
            document.getElementById(`op-tab-${tabName}`).classList.add('active');
        }

        // Buscar produto
        function buscarProdutoOP() {
            const produto = document.getElementById('op-produto').value;
            console.log('Buscando produto:', produto);
            // TODO: Implementar busca de produto via API
            alert('Funcionalidade de busca em desenvolvimento.');
        }

        // Salvar ordem de produção
        function salvarOrdemProducao() {
            const dados = {
                produto: document.getElementById('op-produto').value,
                previsao: document.getElementById('op-previsao').value,
                quantidade: document.getElementById('op-quantidade').value,
                custo_estimação: document.getElementById('op-custo-estimação').value,
                custo_mao_obra: document.getElementById('op-custo-mao-obra').value,
                custo_materiais: document.getElementById('op-custo-materiais').value,
                prioridade: document.getElementById('op-prioridade').value || 'normal',
                centro_custo: document.getElementById('op-centro-custo').value || '',
                responsavel: document.getElementById('op-responsavel').value || '',
                cliente: document.getElementById('op-cliente').value || '',
                pedido_venda: document.getElementById('op-pedido-venda').value || '',
                lote: document.getElementById('op-lote').value || '',
                setor: document.getElementById('op-setor').value || '',
                observacoes: document.getElementById('op-observacoes').value || ''
            };
            
            console.log('Salvando ordem de produção:', dados);
            
            // Validação básica
            if (!dados.produto) {
                alert('Por favor, selecione um produto.');
                return;
            }
            if (!dados.quantidade || dados.quantidade < 1) {
                alert('Por favor, informe uma quantidade válida.');
                return;
            }
            
            // TODO: Implementar salvamento via API
            alert('Ordem de produção salva com sucesso!');
            hideModal('modal-nova-ordem');
        }

        // Funções dos botões de ação da tabela
        function novoItemOP() {
            alert('Adicionar novo item - Em desenvolvimento');
        }

        function editarItemOP() {
            alert('Editar item selecionação - Em desenvolvimento');
        }

        function excluirItemOP() {
            alert('Excluir item selecionação - Em desenvolvimento');
        }

        function novoMaterialOP() {
            alert('Adicionar novo material - Em desenvolvimento');
        }

        function novaMaoObraOP() {
            alert('Adicionar mão de obra - Em desenvolvimento');
        }

        function atualizarCustosOP() {
            alert('Atualizando custos dos itens...');
        }

        function novaOrdemProducaoRapida() {
            alert('Nova ordem de produção rápida - Em desenvolvimento');
        }

        // Funções da sidebar
        function incluirOP() {
            alert('Incluir - Em desenvolvimento');
        }

        function imprimirOP() {
            alert('Imprimir ordem de produção - Em desenvolvimento');
        }

        function duplicarOP() {
            alert('Duplicar ordem de produção - Em desenvolvimento');
        }

        function conferirOP() {
            alert('Conferir ordem de produção - Em desenvolvimento');
        }

        function iniciarProducao() {
            alert('Iniciar produção - Em desenvolvimento');
        }

        function anexosOP() {
            alert('Gerenciar anexos - Em desenvolvimento');
        }

        function historicoOP() {
            alert('Histórico de alterações - Em desenvolvimento');
        }

        function tarefasOP() {
            alert('Gerenciar tarefas - Em desenvolvimento');
        }

        function ordemParcial() {
            alert('Criar ordem parcial - Em desenvolvimento');
        }

        function excluirOP() {
            if (confirm('Tem certeza que deseja excluir esta ordem de produção')) {
                alert('Ordem de produção excluída');
                hideModal('modal-nova-ordem');
            }
        }

        function cancelarOP() {
            if (confirm('Tem certeza que deseja cancelar esta ordem de produção')) {
                hideModal('modal-nova-ordem');
            }
        }

        // Inicializar data padrão ao abrir o modal
        function initModalNovaOrdem() {
            const hoje = new Date();
            const dataFormatada = hoje.toISOString().split('T')[0];
            const inputPrevisao = document.getElementById('op-previsao');
            if (inputPrevisao && !inputPrevisao.value) {
                inputPrevisao.value = dataFormatada;
            }
        }

        // Observer para quando o modal for aberto
        const modalNovaOrdem = document.getElementById('modal-nova-ordem');
        if (modalNovaOrdem) {
            const observer = new MutationObserver((mutations) => {
                mutations.forEach((mutation) => {
                    if (mutation.attributeName === 'class' && modalNovaOrdem.classList.contains('active')) {
                        initModalNovaOrdem();
                    }
                });
            });
            observer.observe(modalNovaOrdem, { attributes: true });
        }

        // ============================================
        // INICIALIZAÇÃO
        // ============================================
        document.addEventListener('DOMContentLoaded', () => {
            console.log('PCP Module Initialized');
            // Carregar dados do usuário
            carregarDaçãosUsuario();
            // Carregar dados iniciais aqui
            loadDashboardData();
        });

        // Função para carregar dados do usuário logação
        async function carregarDaçãosUsuario() {
            try {
                const token = localStorage.getItem('token');
                const response = await fetch('/api/user/me', {
                    credentials: 'include',
                    headers: token  { 'Authorization': `Bearer ${token}` } : {}
                });
                
                if (response.ok) {
                    const user = await response.json();
                    console.log('ðŸ‘¤ Daçãos do usuário recebidos:', user);
                    
                    const nomeCompleto = user.nome || user.name || 'Usuário';
                    const primeiroNome = nomeCompleto.split(' ')[0];
                    
                    const userNameEl = document.getElementById('user-name');
                    if (userNameEl) userNameEl.textContent = primeiroNome;
                    
                    const userPhotoEl = document.getElementById('user-photo');
                    const userAvatarDiv = document.getElementById('user-avatar');
                    
                    const fotoUrl = user.foto_perfil_url || user.avatar || user.foto;
                    
                    if (fotoUrl && fotoUrl !== '/avatars/default.webp' && userPhotoEl) {
                        userPhotoEl.src = fotoUrl;
                        userPhotoEl.onerror = function() {
                            mostrarIniciaisAvatar(nomeCompleto, userAvatarDiv);
                        };
                    } else {
                        mostrarIniciaisAvatar(nomeCompleto, userAvatarDiv);
                    }
                    
                    localStorage.setItem('userData', JSON.stringify({
                        nome: nomeCompleto,
                        email: user.email,
                        avatar: fotoUrl
                    }));
                    
                    console.log('✅ Usuário carregação:', primeiroNome);
                } else {
                    carregarUsuarioLocalStorage();
                }
            } catch (error) {
                console.error('âŒ Erro ao carregar dados do usuário:', error);
                carregarUsuarioLocalStorage();
            }
        }
        
        function mostrarIniciaisAvatar(nomeCompleto, avatarDiv) {
            const iniciais = nomeCompleto.split(' ').slice(0, 2).map(n => n[0]).join('').toUpperCase() || 'U';
            const cores = ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#ec4899', '#06b6d4'];
            const cor = cores[nomeCompleto.charCodeAt(0) % cores.length];
            
            if (avatarDiv) {
                avatarDiv.innerHTML = `<span style="display:flex;align-items:center;justify-content:center;width:100%;height:100%;background:${cor};color:white;font-weight:600;border-radius:50%;font-size:14px;">${iniciais}</span>`;
            }
        }
        
        function carregarUsuarioLocalStorage() {
            try {
                const userData = JSON.parse(localStorage.getItem('userData') || '{}');
                if (userData.nome) {
                    const userNameEl = document.getElementById('user-name');
                    if (userNameEl) userNameEl.textContent = userData.nome.split(' ')[0];
                    if (userData.avatar) {
                        const userPhotoEl = document.getElementById('user-photo');
                        if (userPhotoEl) userPhotoEl.src = userData.avatar;
                    }
                }
            } catch (e) {
                console.log('Erro ao carregar usuário do localStorage');
            }
        }

        // Função placeholder para carregar dados
        async function loadDashboardData() {
            // TODO: Implementar chamadas API
            console.log('Loading dashboard data...');
        }
    </script></body>
</html>
